{% extends "base.html" %}
{% load staticfiles %}

{% block content %}

<div class="row justify-content-center text-center">
  <div class="col-md-10">
    <h2>{{title}}</h2>
  </div>
</div>
<div class="row justify-content-center">
  <div class="col-10 text-center">
    <h4><b>Inspeção:</b> {{inspection}}</h4>
  </div>
</div>

<div class="row justify-content-center text-center">
  <div class="col-10">
    <a type="button" class="btn btn-light" href="/inspecao/{{inspection.id}}/mapa">
      <span class="text-dark">Ver mapa</span>
      <img class="text-center center-block img-fluid" style="width: 30px; margin: 0px; padding: 0px;" src="{% static 'img/world.png'%}">
    </a>
  </div>
</div>

<div class="row">
  <div class="col-2">
    <a href="/inspecao">Voltar às inspeções</a>
  </div>
</div>
<br>

<div class="row center-block justify-content-center">
  <div class="col-md-10">
    <table class="table table-hover">
      <tr>
        <th>Tipo</th>
        <th>Descrição</th>
        <th>Última alteração</th>
        <th>Ações</th>
      </tr>
      {% for event in events %}
      <tr onclick="goToEvents({{i.id}});">
        {% if event.kind == 'Checked' %}
          <td><span class="badge badge-success">Verificado</span></td>
        {% elif event.kind == 'Observation'%}
          <td><span class="badge badge-info">Observação</span></td>
        {% else %}
          <td><span class="badge badge-danger">Problema</span></td>
        {% endif%}
        <td>{{event.description}}</td>
        <td>{{event.last_edit_at}}</td>
        {% if event.inspection.supervisor.id == user.id or event.user.id == user.id %}
        <td>
          <button type="button" class="btn btn-danger" name="button">Excluir</button>
        </td>
        {% else %}
        <td>
          <button type="button" class="btn btn-danger" disabled="disabled" name="button">Excluir</button>
        </td>
        {% endif %}
      </tr>
      {% endfor %}
    </table>
  </div>
</div>

{% endblock %}
